{"version":3,"file":"js/setting.148982d7.js","mappings":"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","sources":["webpack://vue_frontent/./src/views/SettingView.vue","webpack://vue_frontent/./src/components/ChangePassword.vue","webpack://vue_frontent/./src/components/ChangePassword.vue?9450","webpack://vue_frontent/./src/views/SettingView.vue?d08e"],"sourcesContent":["<template>\n  <v-container fluid>\n    <h1>Настройки</h1>\n    <v-row>\n      <v-col>\n        <ChangePassword />\n      </v-col>\n    </v-row>\n  </v-container>\n</template>\n\n<script>\nimport ChangePassword from \"../components/ChangePassword\";\n\nexport default {\n  name: \"SettingView\",\n  components: {\n    ChangePassword,\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n","<template>\n  <div class=\"change_password_component\">\n    <h2>Изменение пароля</h2>\n\n    <v-row class=\"mt-2\">\n      <v-col cols=\"4\">\n        <VTextField\n            v-model=\"oldPassword\"\n            :class=\"{error_message: errors.oldPassword.length > 0}\"\n            label=\"Old password\"\n            density=\"compact\"\n            variant=\"outlined\"\n            type=\"password\"\n            :error-messages=\"errors.oldPassword\"\n        ></VTextField>\n      </v-col>\n      <v-col cols=\"4\">\n        <VTextField\n            theme=\"dark\"\n            v-model=\"newPassword\"\n            :class=\"{error_message: errors.newPassword.length > 0}\"\n            label=\"New password\"\n            density=\"compact\"\n            variant=\"outlined\"\n            type=\"password\"\n            :error-messages=\"errors.newPassword\"\n        ></VTextField>\n      </v-col>\n      <v-col cols=\"4\">\n        <VTextField\n            theme=\"dark\"\n            v-model=\"confirmationNewPassword\"\n            :class=\"{error_message: errors.confirmationNewPassword.length > 0}\"\n            label=\"Password confirmation\"\n            density=\"compact\"\n            variant=\"outlined\"\n            type=\"password\"\n            :error-messages=\"errors.confirmationNewPassword\"\n        ></VTextField>\n      </v-col>\n    </v-row>\n    <div v-if=\"successChange\" class=\"success_message\">\n      Пароль успешно изменен\n    </div>\n    <VBtn\n        @click=\"change\"\n        :loading=\"loading\"\n        color=\"blue-grey\"\n        density=\"compact\"\n    >\n      Сохранить\n    </VBtn>\n\n  </div>\n</template>\n\n<script>\nimport api from '@/api/user';\n\nexport default {\n  name: \"ChangePassword\",\n  data: () => {\n    return {\n      loading: false,\n      oldPassword: '',\n      newPassword: '',\n      confirmationNewPassword: '',\n      errors: {\n        oldPassword: '',\n        newPassword: '',\n        confirmationNewPassword: '',\n      },\n      successChange: false,\n    };\n  },\n  methods: {\n    async change() {\n      // вывести все параметры с trim\n      const oldPassword = this.oldPassword.trim();\n      const newPassword = this.newPassword.trim();\n      const confirmationNewPassword = this.confirmationNewPassword.trim()\n\n      this.errors.oldPassword = ''\n      this.errors.newPassword = '';\n      this.errors.confirmationNewPassword = '';\n      this.successChange = false;\n\n      let abort = false;\n\n      if (oldPassword === '') {\n        this.errors.oldPassword = 'заполните поле'\n        abort = true;\n      }\n\n      if (newPassword === '') {\n        this.errors.newPassword = 'заполните поле'\n        abort = true;\n      }\n\n      if (confirmationNewPassword === '') {\n        this.errors.confirmationNewPassword = 'заполните поле'\n        abort = true;\n      }\n\n      if (abort) {\n        return false;\n      }\n\n      // проверить чтобы все пароли были заполненны (если пустое поле - выходим)\n      if (this.newPassword !== this.confirmationNewPassword) {\n        this.errors.confirmationNewPassword = 'пароль не соответствует введенному'\n        return false;\n      }\n\n\n      this.loading = true;\n\n      try {\n        const result = await api.changePassword(this.oldPassword, this.newPassword);\n\n        if (result.status === 'success') {\n          this.oldPassword = '';\n          this.newPassword = '';\n          this.confirmationNewPassword = '';\n          this.successChange= true;\n          setInterval(() => {\n            this.successChange= false;\n          }, 3000)\n        } else {\n          this.errors.oldPassword = 'не правильный пароль'\n        }\n\n      } catch (e) {\n        console.log('error', e)\n      } finally {\n        this.loading = false;\n      }\n\n    },\n  },\n}\n</script>\n\n<style lang=\"scss\">\n\n.change_password_component {\n  background: #686868;\n  padding: 15px 25px 15px;\n  margin: 10px 15px;\n  border-radius: 10px;\n}\n\n.error_message {\n  .v-messages {\n    color: #8d0404 !important;\n  }\n}\n\n.success_message {\n  color: #68f568;\n  font-size: 12px;\n  margin-bottom: 10px;\n}\n\n</style>\n","import { render } from \"./ChangePassword.vue?vue&type=template&id=d2313ab8\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=js\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=js\"\n\nimport \"./ChangePassword.vue?vue&type=style&index=0&id=d2313ab8&lang=scss\"\n\nimport exportComponent from \"/home/konst/Projects/Dashboard/resources/assets/vue_frontent/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./SettingView.vue?vue&type=template&id=22deeb63\"\nimport script from \"./SettingView.vue?vue&type=script&lang=js\"\nexport * from \"./SettingView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/home/konst/Projects/Dashboard/resources/assets/vue_frontent/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["fluid","class","cols","oldPassword","errors","length","label","density","variant","type","theme","newPassword","confirmationNewPassword","change","loading","color","name","data","successChange","methods","async","this","trim","abort","result","status","setInterval","e","console","log","__exports__","components","ChangePassword","render"],"sourceRoot":""}