"use strict";(self["webpackChunkvue_frontent"]=self["webpackChunkvue_frontent"]||[]).push([[314],{7006:function(s,e,r){r.r(e),r.d(e,{default:function(){return k}});var o=r(6252),a=r(1669),n=r(9003),t=r(3379);const d=(0,o._)("h1",null,"Настройки",-1);function l(s,e,r,l,w,i){const c=(0,o.up)("ChangePassword");return(0,o.wg)(),(0,o.j4)(a.K,{fluid:""},{default:(0,o.w5)((()=>[d,(0,o.Wm)(n.o,null,{default:(0,o.w5)((()=>[(0,o.Wm)(t.D,null,{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})])),_:1})])),_:1})}var w=r(3577),i=r(9788),c=r(6859);const m={class:"change_password_component"},u=(0,o._)("h2",null,"Изменение пароля",-1),h={key:0,class:"success_message"},P=(0,o.Uk)(" Сохранить ");function g(s,e,r,a,d,l){return(0,o.wg)(),(0,o.iD)("div",m,[u,(0,o.Wm)(n.o,{class:"mt-2"},{default:(0,o.w5)((()=>[(0,o.Wm)(t.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c.h,{modelValue:s.oldPassword,"onUpdate:modelValue":e[0]||(e[0]=e=>s.oldPassword=e),class:(0,w.C_)({error_message:s.errors.oldPassword.length>0}),label:"Old password",density:"compact",variant:"outlined",type:"password","error-messages":s.errors.oldPassword},null,8,["modelValue","class","error-messages"])])),_:1}),(0,o.Wm)(t.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c.h,{theme:"dark",modelValue:s.newPassword,"onUpdate:modelValue":e[1]||(e[1]=e=>s.newPassword=e),class:(0,w.C_)({error_message:s.errors.newPassword.length>0}),label:"New password",density:"compact",variant:"outlined",type:"password","error-messages":s.errors.newPassword},null,8,["modelValue","class","error-messages"])])),_:1}),(0,o.Wm)(t.D,{cols:"4"},{default:(0,o.w5)((()=>[(0,o.Wm)(c.h,{theme:"dark",modelValue:s.confirmationNewPassword,"onUpdate:modelValue":e[2]||(e[2]=e=>s.confirmationNewPassword=e),class:(0,w.C_)({error_message:s.errors.confirmationNewPassword.length>0}),label:"Password confirmation",density:"compact",variant:"outlined",type:"password","error-messages":s.errors.confirmationNewPassword},null,8,["modelValue","class","error-messages"])])),_:1})])),_:1}),s.successChange?((0,o.wg)(),(0,o.iD)("div",h," Пароль успешно изменен ")):(0,o.kq)("",!0),(0,o.Wm)(i.T,{onClick:l.change,loading:s.loading,color:"blue-grey",density:"compact"},{default:(0,o.w5)((()=>[P])),_:1},8,["onClick","loading"])])}var f=r(6850),p={name:"ChangePassword",data:()=>({loading:!1,oldPassword:"",newPassword:"",confirmationNewPassword:"",errors:{oldPassword:"",newPassword:"",confirmationNewPassword:""},successChange:!1}),methods:{async change(){const s=this.oldPassword.trim(),e=this.newPassword.trim(),r=this.confirmationNewPassword.trim();this.errors.oldPassword="",this.errors.newPassword="",this.errors.confirmationNewPassword="",this.successChange=!1;let o=!1;if(""===s&&(this.errors.oldPassword="заполните поле",o=!0),""===e&&(this.errors.newPassword="заполните поле",o=!0),""===r&&(this.errors.confirmationNewPassword="заполните поле",o=!0),o)return!1;if(this.newPassword!==this.confirmationNewPassword)return this.errors.confirmationNewPassword="пароль не соответствует введенному",!1;this.loading=!0;try{const s=await f.Z.changePassword(this.oldPassword,this.newPassword);"success"===s.status?(this.oldPassword="",this.newPassword="",this.confirmationNewPassword="",this.successChange=!0,setInterval((()=>{this.successChange=!1}),3e3)):this.errors.oldPassword="не правильный пароль"}catch(a){console.log("error",a)}finally{this.loading=!1}}}},_=r(3744);const C=(0,_.Z)(p,[["render",g]]);var v=C,N={name:"SettingView",components:{ChangePassword:v}};const y=(0,_.Z)(N,[["render",l]]);var k=y}}]);
//# sourceMappingURL=setting.148982d7.js.map